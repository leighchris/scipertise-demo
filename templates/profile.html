{% extends 'layout.html' %}
{% load static %}

{% block title %}Home{% endblock %}

{% block content %}

<div class="container-fluid" id="profile_container">
   <div class="container profile">
    <div class="container spacer">
            </div>
    
    <div class="container" id = "profile_intro">  
        <div class="container" id="expert">
            {% if user.image %}
            <div>
               <a href="{% url 'edit_profile_image' %}"><img class="profile_image" src="{{ user.image.url }}" width="180"/></a>
            </div>
               {% elif not user.image and user.is_authenticated and user == request.user %}
                <div class="edit_profile_image_button"><p class="image_bubble">Add Profile Image&nbsp&nbsp<a href="{% url 'edit_profile_image' %}"><img class="iconic" src="/static/css/pencil.svg"></a></p></div>
            {% endif %}
            <div class="container user_name">
            <p class="profile_name">{{ user.first_name }}&nbsp{{ user.last_name }}</p>
            <p class="profile_text">{{user.position}}</p>
<!--            <p class="profile_text">Skills:&nbsp{{user.skills.all|join:", "}}</p>-->
        
                {% if user.website %}
                <a href="{{ user.website }}" target="_blank"><p class="website_text">Google Scholar Profile</p></a>
                {% else %}
                <br>
                {% endif %}
                
                <div class="container skills">
                {% for skill in user.skills.all %}
                    <div class="skill_bubble"><a href="{% url 'skills' skill.name %}"><p class="skill_bubble">{{ skill.name }}</p></a></div>
                {% endfor %}
                </div>
            </div>

        </div>
  
        

        <div class="container" id="availability">
                                
            <p>Availability: {{ user.availability }}</p>
            <p>Rate: {{ user.rate }}</p>
               
            {% if user != request.user %}
                <a href="{% url 'booking:user_booking_new' pk=user.pk %}"><button type="submit" class="booking_button">Request to Book</button></a>
            {% if user.gives_tutorials %}
                <p>or <a href="#tutorial">Join a group session</a></p>
            {% endif %} 
            {% elif user.is_authenticated and user == request.user %}
                <div class="edit_profile"><p class="skill_bubble">Edit Profile&nbsp&nbsp<a href="{% url 'edit_profile' %}"><img class="iconic" src="/static/css/pencil.svg"></a></p></div>
            {% endif %}
           
       </div>

    </div>
       <div class="container spacer">
            </div>
       </div>
<div class="container profile">
    <div class="container spacer">
            </div>
     <div class="container" id="profile_content">
         <div class="profile_content_text">
         <h4 class="bio_title">About Me</h4>
         <p class="profile_text">{{ user.bio }}</p>
    <div class="divider"></div>
         {% if user.skill_area1 %}
         <h4 class="bio_title">Expertise</h4>
         <h4 class="text_title">{{ user.skill_area1_title }}</h4>
         <p class="profile_text">{{ user.skill_area1 }}</p>
    <div class="divider"></div>
         {% endif %}

          {% if user.skill_area2 %}
         <h4 class="text_title">{{ user.skill_area2_title }}</h4>
          <p class="profile_text">{{ user.skill_area2 }}</p>
    <div class="divider"></div>
           {% endif %}
    
          {% if user.skill_area3 %}
         <h4 class="text_title">{{ user.skill_area3_title }}</h4>
          <p class="profile_text">{{ user.skill_area3 }}</p>
    <div class="divider"></div>
         {% endif %}
   
           {% if user.skill_area4 %}
         <h4 class="text_title">{{ user.skill_area4_title }}</h4>
         <p class="profile_text">{{ user.skill_area4 }}</p>
    <div class="divider"></div>
            {% endif %}

           {% if user.skill_area5 %}
         <h4 class="text_title">{{ user.skill_area5_title }}</h4>
          <p class="profile_text">{{ user.skill_area5 }}</p>
    <div class="divider"></div>
          {% endif %}
 
          {% if user.software_hardware %}
          <h4 class="bio_title">Software and Hardware</h4>
         <p class="profile_text">{{ user.software_hardware }}</p>
          {% endif %}
             <br>
     
       </div>
    </div>
     <div class="container spacer">
            </div>
    </div>

    

 <a name="tutorial"></a>   
    
<div class="container profile">
       <div class="container spacer">
            </div>
<div class="container" id="profile_content">  
    <div class="profile_content_text">
    {% if user.gives_tutorials and user.tutorial_area %}
        <h4 class="bio_title">Tutorials and Group Webinars</h4>
         <p class="profile_text">{{user.first_name}} can lead tutorials on: {{ user.tutorial_area }}</p>
        {% endif %}<br>
{% if user.gives_tutorials and tutorials %}

<h4 class="bio_title">Available Tutorials</h4>
{% for booking in tutorials %}
        {% if booking.is_confirmed %}

    <div class="container card">
        <h5 class="card-title"><a href="{% url 'booking:booking_detail' pk=booking.pk %}">{{ booking.title }}</a></h5>
        <p class="card-text">{{ booking.start_time }}</p>
    </div>


        {% endif %}
        {% endfor %}
{% else %}
        <div class="container card">
       <p class="profile_text">This user is not currently hosting any tutorials.<p>
                 {% if user != request.user %}
                <a href="{% url 'booking:user_booking_new' pk=user.pk %}"><button type="submit" class="booking_button">Request a Tutorial</button></a>
            {% endif %}
    </div>
        {% endif %}
      

</div>
    
</div>
       <div class="container spacer">
            </div>
</div>


</div>

{% endblock %}